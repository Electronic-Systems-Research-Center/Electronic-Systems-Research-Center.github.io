<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Published Materials - Electronic Systems Research Center</title>
  <meta name="description" content="A curated list of conference papers and journals by the Center Head of the Electronic Systems Research Center." />
  <meta name="keywords" content="Conference Papers, Journals, Publications, Electronic Systems Research Center, Research" />
  <meta property="og:title" content="Published Materials - Electronic Systems Research Center" />
  <meta property="og:description" content="A curated list of conference papers and journals by the Center Head." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://electronic-systems-research-center.github.io/" />
  <link rel="icon" type="image/x-icon" href="../build/img/esrc logo 2.webp" />
  <link rel="canonical" href="https://electronic-systems-research-center.github.io/" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Fuse.js for fuzzy search -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.0/dist/cdn.min.js" defer></script>
  <!-- Schema.org JSON-LD for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Published Materials - Electronic Systems Research Center",
    "description": "A curated list of conference papers and journals by the Center Head of the Electronic Systems Research Center."
  }
  </script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col" oncontextmenu="return false;">
  <!-- HEADER (Fixed) -->
  <header x-data="{ open: false }" class="fixed top-0 left-0 w-full bg-white/90 backdrop-blur-md shadow-md z-50 h-16 flex items-center">
    <div class="container mx-auto px-4 flex items-center justify-between">
      <!-- Brand -->
      <a href="../index.html" hreflang="en-us">
        <div class="text-base sm:text-xl md:text-2xl font-bold text-blue-600 whitespace-nowrap">
          Electronic Systems Research Center
        </div>
      </a>
      <!-- Desktop Navigation -->
      <nav class="hidden md:flex space-x-6 text-gray-700">
        <ul class="flex space-x-6">
          <li><a href="../index.html#about" hreflang="en-us" class="hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">About</a></li>
          <li><a href="../index.html#research" hreflang="en-us" class="hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Research</a></li>
          <li><a href="../build/teammembers.html" hreflang="en-us" class="hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Team</a></li>
          <li><a href="../build/centerhighlights.html" hreflang="en-us" class="hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Center Highlights</a></li>
          <li><a href="../build/publishedmaterials.html" hreflang="en-us" class="hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Published Papers</a></li>
        </ul>
      </nav>
      <!-- Mobile Toggle Button -->
      <button @click="open = !open" class="md:hidden text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500" aria-label="Toggle Navigation Menu">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
        </svg>
      </button>
    </div>
    <!-- Mobile Navigation Menu -->
    <nav :class="open ? 'block' : 'hidden'" class="absolute top-full left-0 w-full bg-white shadow-md md:hidden p-4" aria-label="Mobile Navigation">
      <ul class="flex flex-col space-y-2">
        <li><a href="../index.html#about" hreflang="en-us" class="block px-4 py-2 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">About</a></li>
        <li><a href="../index.html#research" hreflang="en-us" class="block px-4 py-2 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Research</a></li>
        <li><a href="../build/teammembers.html" hreflang="en-us" class="block px-4 py-2 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Team</a></li>
        <li><a href="../build/centerhighlights.html" hreflang="en-us" class="block px-4 py-2 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Center Highlights</a></li>
        <li><a href="../build/publishedmaterials.html" hreflang="en-us" class="block px-4 py-2 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Published Papers</a></li>
      </ul>
    </nav>
  </header>

  <!-- MAIN CONTENT -->
  <main class="flex-grow pt-24 px-4 sm:px-6 md:px-8">
    <div class="max-w-4xl mx-auto" x-data="publications()" x-init="init()">
      <!-- First Row: Filter Chips & Sort Dropdown -->
      <div class="flex flex-col sm:flex-row items-center justify-between mb-4">
        <!-- Filter Chips -->
        <div class="flex flex-wrap gap-2" role="group" aria-label="Filter Publications">
          <button @click="selectedFilter = 'All'; currentPage = 1" 
                  :class="selectedFilter === 'All' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'" 
                  class="px-4 py-1 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                  :aria-pressed="selectedFilter === 'All'">All</button>
          <button @click="selectedFilter = 'Conference Paper'; currentPage = 1" 
                  :class="selectedFilter === 'Conference Paper' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'" 
                  class="px-4 py-1 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                  :aria-pressed="selectedFilter === 'Conference Paper'">Conference Paper</button>
          <button @click="selectedFilter = 'Journal'; currentPage = 1" 
                  :class="selectedFilter === 'Journal' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'" 
                  class="px-4 py-1 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
                  :aria-pressed="selectedFilter === 'Journal'">Journal</button>
        </div>
        <!-- Sort Dropdown -->
        <div class="flex items-center mt-4 sm:mt-0">
          <label for="sortOrder" class="mr-2 text-sm font-medium text-gray-700">Sort by:</label>
          <select id="sortOrder" x-model="sortOrder" @change="sortPublications()"
                  class="appearance-none border border-gray-300 rounded-md py-2 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="desc">Most Recent</option>
            <option value="asc">Oldest</option>
          </select>
        </div>
      </div>
      <!-- Second Row: Search Bar with Auto-Suggest -->
      <div class="mb-6 relative">
        <input type="text" placeholder="Search publications..."
               x-model="searchQuery"
               @input="showSuggestions = true"
               @focus="showSuggestions = true"
               @blur="setTimeout(() => showSuggestions = false, 200)"
               class="w-full border border-gray-300 rounded-md py-2 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <!-- Auto-Suggest Dropdown with Enhanced Styling and Accessibility -->
        <template x-if="showSuggestions && suggestions.length > 0">
          <ul role="listbox" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg mt-1 max-h-48 overflow-y-auto">
            <template x-for="suggestion in suggestions" :key="suggestion">
              <li tabindex="0" role="option" @click="selectSuggestion(suggestion)" class="px-4 py-2 hover:bg-gray-100 cursor-pointer" x-text="suggestion"></li>
            </template>
          </ul>
        </template>
      </div>
      <!-- Skeleton Loader -->
      <template x-if="loading">
        <div class="space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-sm animate-pulse">
            <div class="h-4 bg-gray-300 rounded w-1/4 mb-4"></div>
            <div class="h-6 bg-gray-300 rounded w-3/4 mb-6"></div>
            <div class="h-4 bg-gray-300 rounded w-full mb-4"></div>
            <div class="h-4 bg-gray-300 rounded w-5/6"></div>
          </div>
          <div class="bg-white p-6 rounded-lg shadow-sm animate-pulse">
            <div class="h-4 bg-gray-300 rounded w-1/4 mb-4"></div>
            <div class="h-6 bg-gray-300 rounded w-3/4 mb-6"></div>
            <div class="h-4 bg-gray-300 rounded w-full mb-4"></div>
            <div class="h-4 bg-gray-300 rounded w-5/6"></div>
          </div>
        </div>
      </template>
      <!-- Publication Cards -->
      <template x-if="!loading">
        <template x-for="(pub, index) in paginatedPublications()" :key="index">
          <div class="bg-white p-6 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 mb-6 relative" x-data="{ expanded: false }">
            <!-- Header: Date on left, Type Chip on right -->
            <div class="flex justify-between items-center">
              <p class="text-sm text-gray-500" x-text="pub.formattedDate"></p>
              <span class="px-3 py-1 text-xs rounded bg-blue-100 text-blue-800" x-text="pub.type"></span>
            </div>
            <!-- Title -->
            <h3 class="text-xl font-semibold mt-1" x-text="pub.title"></h3>
            <!-- Summary with Inline Details -->
            <p class="text-gray-600 mt-3 text-base">
              <span x-text="pub.summary"></span>
              <span x-show="expanded"
                    x-transition:enter="transition ease-out duration-300"
                    x-transition:enter-start="opacity-0 transform -translate-y-1"
                    x-transition:enter-end="opacity-100 transform translate-y-0"
                    x-transition:leave="transition ease-in duration-300"
                    x-transition:leave-start="opacity-100 transform translate-y-0"
                    x-transition:leave-end="opacity-0 transform -translate-y-1"
                    class="ml-1"
                    x-text="pub.details"></span>
            </p>
            <!-- Toggle Details Button -->
            <button class="text-blue-500 text-sm font-medium mt-3 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center"
                    @click="expanded = !expanded"
                    :aria-expanded="expanded">
              <svg x-show="!expanded" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
              </svg>
              <svg x-show="expanded" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" />
              </svg>
            </button>
            <!-- Read More & Keywords -->
            <div class="flex flex-col sm:flex-row justify-between items-center mt-4">
              <a :href="pub.link" hreflang="en-us" class="text-blue-500 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500" target="_blank" rel="noopener noreferrer">
                Read more
              </a>
              <div class="flex flex-wrap gap-2 mt-2 sm:mt-0">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 text-xs rounded-full" x-text="pub.keyword1"></span>
                <span class="bg-blue-100 text-blue-800 px-3 py-1 text-xs rounded-full" x-text="pub.keyword2"></span>
                <span class="bg-blue-100 text-blue-800 px-3 py-1 text-xs rounded-full" x-text="pub.keyword3"></span>
              </div>
            </div>
          </div>
        </template>
      </template>
      <!-- Modern Pagination Controls -->
      <div class="flex justify-center items-center mt-6 mb-6 space-x-2" x-show="totalPages > 1">
        <button :disabled="currentPage === 1" @click="currentPage--"
                class="px-3 py-1 bg-gray-300 text-gray-700 rounded disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
          Prev
        </button>
        <template x-for="page in visiblePages()" :key="page">
          <button @click="currentPage = page"
                  :class="page === currentPage ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'"
                  class="px-3 py-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
            <span x-text="page"></span>
          </button>
        </template>
        <button :disabled="currentPage === totalPages" @click="currentPage++"
                class="px-3 py-1 bg-gray-300 text-gray-700 rounded disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
          Next
        </button>
      </div>
    </div>
  </main>
  <!-- FOOTER -->
  <footer class="bg-gray-800 text-gray-100 py-6 w-full mt-6">
    <div class="text-center">
      <p>&copy; 2025 Electronic Systems Research Center. All Rights Reserved.</p>
      <p>Email: <a href="mailto:esrc@g.batstate-u.edu.ph" class="text-blue-400 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500">esrc@g.batstate-u.edu.ph</a> | Phone: (043) 980 0385 loc.2405</p>
    </div>
  </footer>
  <!-- PapaParse -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <!-- Alpine.js Component for Publications -->
  <script>
    function publications() {
      return {
        publications: [],
        fuse: null,
        loading: true,
        currentPage: 1,
        papersPerPage: 20,
        sortOrder: 'desc',
        selectedFilter: 'All',
        searchQuery: '',
        showSuggestions: false,
        async init() {
          try {
            const response = await fetch('../src/dr_sang_publications.csv');
            const csvText = await response.text();
            const result = Papa.parse(csvText, { header: true });
            let pubs = result.data.filter(pub => pub.title && pub.title.trim() !== "");
            const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            pubs = pubs.map(pub => {
              if (pub.date) {
                // Regex to handle bundled dates (e.g., "April 22-25 2024") and regular dates.
                const regex = /([A-Za-z]+\s+\d{1,2})(?:-\d{1,2})?[\s,]+(\d{4})/;
                const match = pub.date.match(regex);
                if (match) {
                  const startDate = `${match[1]}, ${match[2]}`;
                  pub.dateObj = new Date(startDate);
                  pub.formattedDate = pub.date;
                } else if (pub.date.includes('/')) {
                  let parts = pub.date.split("/");
                  if (parts.length === 3) {
                    let month = parseInt(parts[0], 10);
                    let day = parseInt(parts[1], 10);
                    let year = parseInt(parts[2], 10);
                    pub.dateObj = new Date(year, month - 1, day);
                    pub.formattedDate = `${months[month - 1]} ${day}, ${year}`;
                  } else {
                    pub.dateObj = new Date(pub.date);
                    pub.formattedDate = pub.date;
                  }
                } else {
                  pub.dateObj = new Date(pub.date);
                  pub.formattedDate = pub.date;
                }
              } else {
                pub.formattedDate = "";
                pub.dateObj = new Date(0);
              }
              return pub;
            });
            this.publications = pubs;
            // Initialize Fuse.js for fuzzy search with token-based matching
            this.fuse = new Fuse(this.publications, {
              keys: ['title', 'summary', 'details', 'keyword1', 'keyword2', 'keyword3'],
              threshold: 0.4
            });
            this.sortPublications();
          } catch (error) {
            console.error("Error loading publications:", error);
          } finally {
            this.loading = false;
          }
        },
        sortPublications() {
          if (this.sortOrder === 'desc') {
            this.publications.sort((a, b) => b.dateObj - a.dateObj);
          } else {
            this.publications.sort((a, b) => a.dateObj - b.dateObj);
          }
          this.currentPage = 1;
        },
        filteredPublications() {
          let filtered = this.selectedFilter === 'All'
                         ? this.publications
                         : this.publications.filter(pub => pub.type === this.selectedFilter);
          if (this.searchQuery.trim() !== '') {
            const q = this.searchQuery.toLowerCase();
            filtered = filtered.filter(pub =>
              pub.title.toLowerCase().includes(q) ||
              pub.summary.toLowerCase().includes(q) ||
              (pub.details && pub.details.toLowerCase().includes(q)) ||
              (pub.keyword1 && pub.keyword1.toLowerCase().includes(q)) ||
              (pub.keyword2 && pub.keyword2.toLowerCase().includes(q)) ||
              (pub.keyword3 && pub.keyword3.toLowerCase().includes(q))
            );
          }
          return filtered;
        },
        paginatedPublications() {
          const filtered = this.filteredPublications();
          const start = (this.currentPage - 1) * this.papersPerPage;
          return filtered.slice(start, start + this.papersPerPage);
        },
        get totalPages() {
          return Math.ceil(this.filteredPublications().length / this.papersPerPage);
        },
        // Fuzzy search suggestions using token-based matching with Fuse.js
        get suggestions() {
          if (!this.searchQuery.trim() || !this.fuse) return [];
          let tokens = this.searchQuery.trim().split(/\s+/);
          let suggestionsSet = new Set();
          tokens.forEach(token => {
            let fuseResults = this.fuse.search(token);
            fuseResults.slice(0, 3).forEach(result => suggestionsSet.add(result.item.title));
          });
          return Array.from(suggestionsSet).slice(0, 5);
        },
        selectSuggestion(suggestion) {
          this.searchQuery = suggestion;
          this.showSuggestions = false;
        },
        // Returns an array of up to 5 page numbers centered on the current page
        visiblePages() {
          const total = this.totalPages;
          let start = this.currentPage - 2;
          let end = this.currentPage + 2;
          if (start < 1) { end += 1 - start; start = 1; }
          if (end > total) { start -= end - total; end = total; }
          if (start < 1) { start = 1; }
          const pages = [];
          for (let i = start; i <= end; i++) {
            pages.push(i);
          }
          return pages;
        }
      }
    }
  </script>
</body>
</html>
